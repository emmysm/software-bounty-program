![alt text](https://raw.githubusercontent.com/Fermat-ORG/media-kit/master/MediaKit/Logotype/fermat_logo_3D/Fermat_logo_v2_readme_1024x466.png  "Fermat Logo")

# Token Platform

## Introduction

The scope and functionality related [Fermat Tokens](https://github.com/Fermat-ORG/fermat/blob/master/FERMAT-WHITE-PAPER.md) in Fermat.org is still under review and is wider than what this bounty will focus on.

There is a business need to start issuing Fermat Tokens manually, and the creation of this platform is to fullfill this need. Fermat Token Platform is expected to evolve greatly over time.

## Scope

### Token Platform

A new platform will be created that will include:

* new Token Wallet

* new Actor and Identity **Token Issuer**, that will extend **Asset Issuer** identity and actor.

* New Transactions that will be used to define basic information for the tokens and a heavily usage of DAP Transactions.


### New Digital Asset type: Token

We will be adding a new type of *Digital Asset* called **Token** that will have a specific *Digital Asset Contract*.

Current *Digital Asset Contract* properties include:

* Expiration Date: which can be null.
* Allow Redemption: indicates if it can be redeemable in a Redemption Point. Token Assets will **not be** reedemable.
* Allow Transfer: indicates if it can be transferred between users. Token Assets can be transferable.
* Allow Selling: indicates if it can be sold or bought between users. Token assets can be sold.

Specific Token Assets contract properties will include:

* Token value: indicating the amount of Tokens this asset represents.

* Fermat Token serial number: a way to indicate how many tokens are available to emit, and identify each token uniquely.

### Transactions

Current transactions supported at DAP are:

* Asset Issuing

* Asset Distribution

* Asset Redemption: this transaction type will not be supported for Fermat tokens.

* Asset Transfer

* Asset Sell


Changes should be included in all transactions types to validate Asset Issuer Identity. *See Current Issues* section.

### Token Wallet 

*[Under review if really needed]*

A new type of Wallet will be added to store the issued Tokens and support the DAP Transactions execution.

### Token Factory

*[Under review if really needed]*

that will allow the manual creation of **Tokens** defining the contract properties and DAP Transactions.

---
### Current issues

The following [flow](http://prezi.com/cqb4evuiwfpw/?utm_campaign=share&utm_medium=copy&rc=ex0share) describes the possible solutions to:

* Asset Issuer Identity Registration 
* Asset Issuer Identity Validation
* Asset Issuer token public transparency

#### Asset Issuer Identity Registration

Currently, the platforms allow the creation of **Asset Issuer** identities without any type of control. Meaning that anyone can register an **Asset Issuer** identity choosing any name. Identity creation happens locally on each device and assets are created using that identity.



##### Proposed Solution: blockchain registration

* The creation of the Asset Issuer identity is registered in the Bitcoin Blockchain with an **Asset Issuer Genesis** transaction that includes in the OP_Return field the name of the identity and the amount of tokens that will ever be generated. It also has the Asset Issuer public Key in the transaction output.

The OP_Return will be used in the following way: [Asset Issuer Name in String] [Max Tokens in Hex]
for example:
op_Return: fermat.org 1406F40 (identity name and 20.000.000 tokens expressed in hex)
Output: public key generated by the Asset Issuer Identity.

This genesis Transaction will be zero value and the fee payment will be from the *Bitcoin Wallet*.

* The Asset factory, before allowing the creation of an asset, request the **Asset Issuer Genesis** transaction from the Blockchain to validate its existence and compare the Asset Issuer name and public Key against the identity.

* If there is a match, the Asset Issuer must sign the asset by providing the private key that generated the public key. With this validation, the asset Factory allows the issuer to create the token.

* When an Asset User or Redeem Point receives an asset, an additional validation to verify that the asset is from a registered **Asset Issuer** should be added by getting the **Asset Issuer Genesis** transaction from the blockchain. Since the platform already validates that the Asset is the same that was issued by the Asset Issuer during the Issuing process, no additional validations are necessary to certify the asset is from the registered issuer.

* We should provide methods to export and import the **Asset Issuer** registered identity to be able to use it on any device.

---

#### Asset Issuer Identity Validation

Currently there is no way for any Asset User to verify that the Asset Issuer sending the asset is the expected identity. For example: we can't validate if an asset from McDonalds, is actually from McDonalds.

##### Proposed Solution: P2P network and Reputation platform

* Registered identities should be propagated across the Fermat device P2P network and stored locally to provide control on **Asset Issuer** name, picture and data so any new Issuer being created, can be notified of matching names.

* Every asset issued by the Issuer Identity will be registered in the reputation platform informing transaction hash and block hash, to be able to get the info from Blockchain for validation.

* Any other actor receiving an asset from an specific Issuer, can provide feedback to be recorded in the Reputation platform, so that users can decide to connect to Issuers and receive their assets or not.

---

#### Multiple Assets Transaction

Currently, we are generating a bitcoin transaction for each asset issued. Each transaction needs to pay at least the fees needed to complete a full cycle, estimated in 30000 satoshis.

Issuing many assets is expensive!

##### Proposed Solution:

* The issuing process will be changed to create a single transaction with the total amount of bitcoins for all the involved assets value. For example, in order to generate 500000 tokens, with a 10000 satoshis value (including fee), we will create a single Genesis transaction of 0.0005 BTC

* Each Distribution transaction that sends the asset to a User, will use the Genesis Transaction as Input. And a small portion of the total value of the Genesis Transaction will be deducted.

* Genesis Transaction funds will be exhausted, once all the assets have been distributed to the users.

---

#### Asset Issuer token public transparency

Information regarding the amount of token issued by an Asset Issuer must be public for anyone to see and control.

##### Proposed Solution:

* Storing information on the blockchain during asset issuing that notifies how many tokens will ever be issued by that Asset Issuer during the Identity registration.

* Storing each Issued Asset in the blockchain as we are actually doing and allowing the P2P network to store the detailed information of how many assets are being issued. The Reputation Platform, would sync this information regarding the amounts of assets issued and the means to find them on the blockchain.

* Asset Factory will prevent an Issuer to continue generating assets after the limit has been reached.

## Timeline

[To be define after final review of this document]

## Evaluation
[To be define after final review of this document]

## Distribution
[To be define after final review of this document]
